language: node_js
node_js:
  - "8"

sudo: true

cache:
  directories:
    - "node_modules"

env:
  global:
    - secure: GZYaKTg4FAY166jKQ688k4eqEkRzpyYLoSHQBBoOnwTpK1oLeDKcN6JaAVwI816mmBqagyesB3DfSaJAiB6a4+b/QnXYJm2BcIV1Se+Bof6JgbkCfCBh2qKaoV3OMrClkymw7RTDX+FDWxnH2gd/tixX7cIuHHWmywSOtJa4lmaxfsNG+p85DkZFwP4LAtVYKm7J6QzFHTSHFYl703ImrgMPyLrqYoDNZ/QpVimM5+hB9Q1X/jZza7H7yKk7laBm8b+i4vNNpGi75mbXKLmkoeL44wc55WQEYtrrbJ/1d5Scgwuyx2LpP5O/EhT179FMAfpVQtUqBfsZsQwrLciGLO4PwepykJz9pHNWRSGJcrW8gJVsg0kdw+7R29l3xj9GnFKHCh3ayQ/vm8njbbGPxEDxdMNwLfZ59T0jOHoJzbpSk06+0Vusp+hX4oww9vh1dDrbIr+NhssL+rxUNRH3o6CKhotWVeYOAkxEUQzInZ3NdjA5BQGPUriAJ4U5d2HSPsqAxfL13C+HMJsOwhaUJIGgEh2x4zRhfznAP5ATQEkvLltr3fQHU05SWq+bFjvopmuq1cHvem3Pxoxxo6pWhOBra97yHnqZixGbHtsoNFDXedRzu2/8uV8Bq/uZBdwJqo59ZU2Og9jABOn14HSfi9NIKNTxLs8UmFx11ssiQtw=
    - secure: yxCA/B5/x9iT/Jp/YsgvDCz/KzrRaCjQoW0GtsIeTSx6MYh/k9rDbyfhC163rOZR03RcW7pNlUypSrKzjxfmQERSbKSsnFJ6URFh2mSms2XXEUvy4TPaL8LQni74Qynd16LwjzaFCzt6C572zf4QLGUrw3ZMdQQ3aaXwpzEYAQ/1s1P7danT2aeiF+qOCQlkAlRT4pOK/sKA3UMxKqrd/D3y0M530WotdOKwaGXLuoldbznhRhh6ZWjXcUf7wUeULvX6erCyxAIThxuNF27KB/uzASJm0KZiwUo0BAVXlTGQiUbmy2KQTMUBNGdE4kB+cNl2H78ZfQmfC8pIsqxaqbv9fsGOERtTijDuLDaelJlDl/3bAbz/IWelYDAZcsjh+x/u0+6E2fEO5/dQQngOP5cOn1mrGZsc2TUWeynWUNx9tjHh8JB6OzSTHsdnGqvWZd5RUZwlGEDe/hIouMMd4AospD4niBvB0xFSd4pjcErDIaz+jS5yxwxTRa6w1juaVOnzplNXZy3VbO8vCnwU+8zEvqBZQNC7rRzP+PP6VWgO3rkOsaIR0FgI7soGU6mFxAslGMb/2ZVspna43xkDGIw9IaRST5idkkn4DSeWH0LwTVogSS+idCsqU3JKRBMkdIp8gbYAA/XgH5xIjFXuJLnzk/OUZjiB24bU9arb+JM=
    - secure: k3eHD0a5eVmfcHx8LW+TJFc7IG+yVHAeDx/5tb2RzvDcR/bMyFdEF+cPmnrTWD9orwRDw4YdZfZXyb96sFR4qGaHq35qT9/x9x/h8+xJNG1E2YzYcrny5SvUbgKjVIOi9GEr+MGa2eJKyJWXX3culbySCrtsYodOtG2mFLGf+KWuyUtYHUQMejZaBZOl+Vztjn5g/rvmbM1TK4r0I/umhNTULg4QOpG0Ha37VNMvXI9Zjo93QEGshJz9xiX6i/umOj/1TQ+6d2iRRYXHtnfTnJZqkL7xAYYBQbHmd74qEcX4mmOVfq5flj5i0gVHsHGTlrqa6Ws1ASEBl7eeivpgDzNZcTz2uqzM0dPlYgi/XsJiMCtTxXmP33IXdzNDbJCZk4PlM3P4F7iS6Qy5GaeoEXVnmGwKSnEUERL0B5Iqdl5U5XFDCiphOC4jGylvzUvxzp32AGn12x6c18aYHNKPXxkp9TM67GGQRa8ltX1LEe4hF9D+DKUmQch8a+D2mTJSg90Av4tdfExUZEaLvNwK/c/m0juqAqyAylJ9tgbBHrXRRYbZacJcMwZu6m3wL9ay+cLlEnR0mhGgCQcc78PA3ii7mSWDJbnOICR7VGtXpH8ZXJ5y22I4zDBN6kHBJkeNRuOYxWZSzmtVB4C6DWkmHkfQJFmCRkopOZxfJmsh5n0=

before_install:
  # - sudo apt-get install sftp
  - sudo apt-get install openssh-server
  - sudo apt-get install sshpass

before_script:
  - "ls -alh"

  - echo "$FTP_PASSWORD | $FTP_USER | $FTP_HOST"
  - "sshpass -p $FTP_PASSWORD ssh $FTP_USER@$FTP_HOST"

  # - secure: ThEUqT+vQyVsxky5s80DHGZxbqhU+ztduJQIAhh2gh9l/0frvR1rIWG/pm6susWm8HZKfp4YQBmNCfvf7l18fRAoqo2uiIB+BD4zsHy+DXmbL2kHgYmVr+Ll8PiiEToSP+C71Iwfh69qI0ru3nphiH/nEhasGTnf65XLvXZKoZSacdtK7pdLuH2ABuZnOM8VXRD/dWhnpmaoHCqSpCm4zJkHxC+pvdTwI+s9bUj5q3EuxCw3rUE/PfDaBlYr83FuZAOe/vX+HTEIvxsnZco82+LD9SQjRGfkOfBsTqmy2Ha4JxCdN0S8dabGvK2OW1ICVzRApn01gogY4isQmRt948g1dFGwEfoRCj3JnA72LF8l4Rm12KC5JK6odLKKTPTrLe5rkDZFRAoI/qENlQW2eTpNnU4v2YHfco5PsVOi7SrNGmVNzAUoIHW+CpcMzrjkQFc+WOemNFZO561KDJWh/8WSQ28wn88eVdPvPRLFxARhWhKM0d519y9g1uRkaD+Tm+++EYvqlwuAsfHWTAjQQHQO1usYB0Ua8gWldfMgSy1Pk4UrarbCOHY3b+J/T3ZztuQBqglEW+SZpxPWy93dbM5RFaQFq27YwknXMrBP9FCMbXMO22nP2jnm8wQsVfYQBWpE72+6uPILAj/0ptLPUi8K0ApwoZLve6LWj8Y4LMI=

  # - secure: Xqyku060MEFzo3sdbZF/Kk9SxtetS+3d2d36RGIrnXXLcAiZj+RmFLssCOWKowQ5PPK0qjaFC5YI//Jk7NwqaH74Shq+gasO/JNAW7+2y3RSkqO4o6fEdzz6lrAwVGKuZUyFfoqOK69CCYABwRjaxIiR7gAsoCQAeg+RhvhJrdj3xZXeIAdaJiq87GVpY6mVePMHq6KabE2wA34MHcRbmvebUNtFPLRmdM6ruxbkNlZKBuJWxtK1a12p01+S4QvzGtPoMxqhq1icC9pTvibeZXe1MmjxsCd3BjRyVuUouC1FwX4R4NkTrQaMFLe3TzU5XwPEaAOrNmoPyJuAsMkUuAVuVGiwSIMD0dVAAMagchD9WtpBGOhnRZYDzPzOvHedJhz0qyWbn1nxyPqL51MujItiLGGJO/8AZGH3Fv+0RwDbrCngRcpDj4ebKPYXv4LJcrMHoAR6EoZV+23HjVx83usuTDNVpvITaADd/yrEZTrxqHZnC/RV5/8WgFFsLEeGd+RYStTkJRb+jrIOlasCsaUasxLfoInLC7hInNIF9OPvOOwNjZbG0VIcl03mn69p+9t9H5j2eAqZK2qWpqSjXoOrcxDb3VC6VgvVeo3W9t5mb3ywxjdyi25aLxoXAmELOMO/Pk5uWuYi62FG+lja+/S7T8BtZaoglxMUCxjB9Dc=
  # - secure: CD3eOak912L6kYzppoz+xEfFgNx+w32JnPDfmHdHy3wKZi9Y7CLm/UqQvI0aj0qeZeUWGnpuU7QuJaurAes/8DpyiArvNdJuzm9R6yf8bOCfch44QSD49mpOEF8nJhqbfKBmxTgAC6n/nYK0cn1WS6wwCIttHs7xT6gN8A8F1bsNxPaUvbZVdTSDyMVuNcWYG4N1LgKa9nWbq2zEl6Gz8N4dLW2trNxNfIkAE8tDw3iZn99nWPMsDjd/eGXR8xaQRFx5+eQ7bEtFsOCYvHwzCvOom6L4vIICXePrk/oYj8yi72/rUTC3O5q+RUFYy2bzhTq8d72Sz+20O0U3Xg0Ugp9ppZXqs3X0wcs/ib8NTko65Ns2nvD/4Mh+mHXaflYMqM9IEcvZYFcEnTuC+6siw1MAEZDxmlf2Ojm5OlCu/PmBpNyGkl4WEexJM4slXGShu+OBOeoqe1XGcAHdTn3RcgcWDrmBUhux858lod58XkHdLZptV/3LgXPRLUs4jcqKsg4b0TTwJ2iC4R+VdRKEqxEYOCP636b3e6h8T0LcLwy+khuZZ0tBFhs9E7MLVJe54E2BiukCNmiEh3pp7ciUhSHbYguMUcOi+gHq+C7P7QmALa+PqMGkN0ZQaSsQ+gPqi2hcChy7AAe65bj66GvSnSf8N/8SWQYEM4oMtdM8aP8=

  # - "sftp -help"
  # - secure: ZH/ResGzOlnhJgs4oIz94Utzo75EKa8EDwZ9TpZaPrZAc3QxLZMmoupV/tONiHF2/WgPH1HaiTBFqkHPO26igJzO1O2lkenfKg2yyZiwxb/m/kQ5vJI/98zv7vnkQcjToA7SJjzNaB7ZkCBu8bNO5iWfvCteUQHbFJ8qCksGEHGnINuff1hSAWrCaGP5DtrhSvcASw3YofKPTn6OA5QWvLkQ7RcT+mPtvUm12L/4U1kwjj2OyqO3OiUSZ/RWo+/STrLxuPBBk9Mv7o2dKK5UEjbV21nb7jsgC7DlALZTWUuLBaiK1VClxfPLN296xQiI1dRLkJSHmkuAZDHkkB5IMyynsJbG4GuYretDaty6Dt4lv8vwB/WrdDjjaviRMLqd5ngYBRZN4oKqZsJLxhJQNiR5VT+COkVh5KJP4+bTjEJzSAKrLkt851qkEBujlH6Mwl07XhjO+DQ/U5Wh3enScEncQUsGLD+iQhc24fNc2IAFAcIlpXmFc2rk1d4eJOIH5gf1OnSXqmzq/hcAXp6tgXiuFH6chRkArglhi6fIKR7LKiXiSJRlRB+CGvdZgEMvQBOnszJYk3j32WoaeF8UsbYR/d5osjos6P/VMGzYB5JBOt6DovHL5mjVlSgcX9qBnrUvy/XARo71RdlmXcAvpOOWUo70ORXzZK7R6ebTysI=

  # - secure: iopLp4r1DaTrgm5sehO9c0DxoQzOE+GeQd3HimWs8UeDYxPMpObyD3irh3nstowUOHC3SrE8lCvW8XzM33OcjdFS98kJYyhHXf1YCgbS65edKNIPLE7M5bJ0y+UriIhT7J0ML0q16LToKuv0bLIMFL8gEgdzaKpiH3HOf5vOrJJrjUdb0K8haIFucPtUc+oQu/Yoy5PgroFbv+3R1Pks5Sc05VlX5pewJGtfxWW86+qoBm9JEBgScr/GGr/K8HVfL7nJT8ZnLQAxLGiCSzJD0yChNQeuvd0wp8ivgif5Zd/f6FcgsbLTo3AvmBejko3LQWzHMbHs8zEozsxlWcE1v2fiNXbovRqwAeObH/BjKJ5/iPsqG3rw+yCeHAkaR94gJIMsQzpZ3LR3nv0Pg9n1yLPCc4aCxcEujZ8Aj+7IPDZmP5rHuZPlUVcwOgMmBoFsghRqXQC+v3LPVcbfiDfcR9V58Bx14JdNGHnX2J2p2A8kEEn120nCgVb9h00VpEW6XtVPSbGsFUL91B9pA7V6vzI+Lhj68jgtUqJry6dLo5ud2C2Y2LYrUoj2PFKCmWwLWR2WqV+wjzpg/QX2EsLaYBsP/WKnnzRhk5l4xJ+xD6sXMnx037kA/U2wFV7vfMDFc9KhBFvdZOLVXkc00OwJ0Fy731oFtlBgeBks15ahawk=

  - "ls -a"
  - "quit"

  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start
